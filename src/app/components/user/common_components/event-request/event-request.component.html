<div class="container">
    <div class="row">
        <div class="col-12">
            <p-toolbar>
                <div class="p-toolbar-group-start" style="font-size:x-large;">View Student Requests
                    <span class="badge rounded-pill text-bg-secondary d-flex align-items-center ms-1"
                        style="font-size:medium;" *ngIf="totalStudentRequest > 0">{{totalStudentRequest}}</span>
                </div>
                <div class="p-toolbar-group-end">
                </div>
            </p-toolbar>
        </div>
        <!-- <div class="col-12">
            <p-table
                    #dt1
                    dataKey="id"
                    [rows]="15"
                    [rowsPerPageOptions]="[15, 30, 60]"
                    [paginator]="bookingRequests && bookingRequests.length > 15"
                    [value]="bookingRequests"
                    [globalFilterFields]="['Id','StudentName', 'Duration']"
                    >
                    <ng-template pTemplate="caption">
                        <div class="row justify-content-between">
                            <div class="col-md-6">
                                <div class="input-group">
                                    <span class="input-group-text">
                                        <i class="pi pi-search"></i>
                                    </span>
                                    <input
                                        pInputText
                                        type="text"
                                        (input)="onInput($event)"
                                        placeholder="Search keyword"
                                        class="form-control"
                                    />
                                </div>
                            </div>
                        </div>                        
                    </ng-template>
                    <ng-template pTemplate="header">
                        <tr>
                            <th pSortableColumn="Id">Id <p-sortIcon field="Id"/></th>
                            <th pSortableColumn="StudentName">Student Name <p-sortIcon field="StudentName"/></th>
                            <th pSortableColumn="Day">Day <p-sortIcon field="Day"/></th>
                            <th pSortableColumn="StartTime">Request Time <p-sortIcon field="StartTime"/></th>
                            <th pSortableColumn="Duration">Duration <p-sortIcon field="Duration" /></th>
                            <th>Actions</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-bookingRequest let-i="rowIndex">
                        <tr>
                            <td width="10%">{{i+1}}</td>
                            <td width="30%" height="40px">
                                <div class="fw-bold">
                                    {{bookingRequest.StudentName}}
                                </div>
                                <div class="text-black-50">
                                    Requested Subject: {{bookingRequest.SubjectName}}
                                </div>
                            </td>
                            <td>
                                {{ getDayLabel(bookingRequest.Day) }}
                            </td>
                            <td>
                                {{ bookingRequest.RequestTime | date: 'hh:mm a' }}
                            </td>
                            <td width="20%">
                                <span class="ml-1 vertical-align-middle">{{ bookingRequest.Duration }}</span>
                            </td>
                            <td *ngIf="!bookingRequest.IsApproved">
                                <p-button icon="pi pi-check" label="Approve" severity="primary" (click)="approveBookingRequest(bookingRequest.Id)" />
                                <p-button icon="pi pi-times" class="ms-2" label="Reject" severity="danger" (click)="rejectBookingRequest(bookingRequest.Id)" />
                            </td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage">
                        <tr>
                            <td colspan="5">No customers found.</td>
                        </tr>
                    </ng-template>
                </p-table>
        </div> -->
    </div>

    <div class="row my-2" *ngIf="bookingRequests && bookingRequests.length > 0">
        <div class="row">
            <ng-container *ngFor="let bookingRequest of bookingRequests; let i = index">
                <div class="col-md-3 my-3">
                    <div class="card">
                        <div class="image-container">
                            <div class="first">
                                <ng-container *ngIf="bookingRequest">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span class="reject" *ngIf="!bookingRequest.IsApproved && bookingRequest.IsRejected" >Reject</span>
                                        <span class="approve" *ngIf="bookingRequest.IsApproved && !bookingRequest.IsRejected" >Approve</span>
                                        <span class="pending" *ngIf="!bookingRequest.IsApproved && !bookingRequest.IsRejected" >Pending</span>
                                    </div>
                                </ng-container>
                            </div>
                            <img [src]="bookingRequest.StudentImgUrl ? bookingRequest.StudentImgUrl : '../../../../../assets/user-profile.png'" class="img-fluid rounded thumbnail-image">
                        </div>
                        <div class="product-detail-container p-2">
                                <div class="d-flex justify-content-between">
                                    <div class="d-flex flex-column mb-2">
                                        <h5 class="subject-name">{{bookingRequest.SubjectName}}</h5>
                                        <span class="label">Topic:</span>
                                        <span class="subject-topic">{{bookingRequest.SubjectTopic}}</span>
                                    </div>
                                    <div class="d-flex flex-column mb-2">
                                        <span class="label">Student Name</span>
                                        <span class="value">{{bookingRequest.StudentName}}</span>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-between align-items-center pt-1">
                                    <div class="color-select d-flex ">
                                        <span class="label">Day:</span>
                                    </div>
                                    <div class="d-flex">
                                        <span class="label">Duration:</span>
                                    </div>
                                    <div class="d-flex">
                                        <span class="label">Accepted:</span>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-between align-items-center pt-1">
                                    <div class="color-select d-flex ">
                                        <span class="value">{{ getDayLabel(bookingRequest.Day) }}</span>
                                    </div>
                                    <div class="d-flex">
                                        <span class="value">{{bookingRequest.Duration}} Minuts</span>
                                    </div>
                                    <div class="d-flex">
                                        <span class="value">SomeTime</span>
                                    </div>
                                </div>
                        </div>
                    </div>
                    <div class="mt-3">
                        <div class="card voutchers">
                            <div class="voutcher-divider">
                                <div class="voutcher-left text-center" (click)="rejectBookingRequest(bookingRequest.Id)">
                                    <span class="voutcher-name">Reject</span>
                                </div>
                                <div class="voutcher-right text-center border-left" (click)="approveBookingRequest(bookingRequest.Id)">
                                    <h5 class="discount-percent">Accept</h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- <div class="position-relative">
                    <div class="card-body">
                        <ng-container *ngIf="bookingRequest">
                            <span class="badge bg-danger position-absolute start-0 top-0 my-1 ms-1"
                                *ngIf="!bookingRequest.IsApproved && bookingRequest.IsRejected">Rejected</span>
                            <span class="badge bg-success position-absolute start-0 top-0 my-1 ms-1"
                                *ngIf="bookingRequest.IsApproved && !bookingRequest.IsRejected">Approved</span>
                            <span class="badge bg-warning position-absolute start-0 top-0 my-1 ms-1"
                                *ngIf="!bookingRequest.IsApproved && !bookingRequest.IsRejected">Pending</span>
                        </ng-container>
                        <div class="custom-product-container border cursor-pointer">
                            <div class="custom-img-container mb-2">
                                <img [src]="bookingRequest.StudentImgUrl ? bookingRequest.StudentImgUrl : '../../../../../assets/user-profile.png'"
                                    class="custom-img rounded-cube border" alt="Booking Request Image">
                            </div>
                            <div class="d-flex flex-column w-100 p-2">
                                <div class="d-flex flex-row justify-content-between">
                                    <div class="text-uppercase fw-semibold ellipsis">
                                        <a href="javascript:void(0);" class="text-uppercase text-dark fw-semibold"
                                            pTooltip="{{ bookingRequest.StudentName }}">
                                            {{ bookingRequest.StudentName }}
                                        </a>
                                    </div>
                                    <i class="fa fa-info-circle fs-4 mt-1 me-1" (click)="openSlotBookingDialog(bookingRequest)"></i>
                                </div>
                                <div class="d-flex flex-column small">
                                    <div class="d-flex align-items-center mt-1">
                                        <div class="text-uppercase fw-semibold">Requested Subject:</div>
                                        <div class="text-small-muted ms-1">{{ bookingRequest.SubjectName }}</div>
                                    </div>
                                    <div class="d-flex align-items-center">
                                        <div class="text-uppercase fw-semibold">Day:</div>
                                        <div class="text-small-muted ms-1">{{ getDayLabel(bookingRequest.Day) }}</div>
                                    </div>
                                    <div class="d-flex align-items-center" *ngIf="!bookingRequest.IsApproved">
                                        <div class="text-uppercase fw-semibold">Requested:</div>
                                        <div class="text-small-muted ms-1">{{ bookingRequest.RequestTime | date: 'hh:mm a'
                                            }}</div>
                                    </div>
                                    <div class="d-flex align-items-center" *ngIf="bookingRequest.IsApproved">
                                        <div class="text-uppercase fw-semibold">Accepted:</div>
                                        <div class="text-small-muted ms-1">{{ bookingRequest.AcceptedTime | date: 'hh:mm a'
                                            }}</div>
                                    </div>
                                    <div class="d-flex align-items-center">
                                        <div class="text-uppercase fw-semibold">Duration:</div>
                                        <div class="text-small-muted ms-1">{{ bookingRequest.Duration }}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> -->
            </ng-container>
        </div>
    </div>
    <div *ngIf="!bookingRequests || bookingRequests.length === 0">
        <p>No booking requests found.</p>
    </div>

</div>
<!-- 
<ng-container *ngIf="isSlotBookingDialogVisible">
    <p-dialog header="Slot Booking Detail" [(visible)]="isSlotBookingDialogVisible" [modal]="true" [style]="{ 'width': '520px' }" (onHide)="closeSlotBookingDialog()">
      <div class="d-flex flex-column w-100 p-2" *ngIf="slotBookingDetail">
        <div class="d-flex">
          <div class="custom-img-container mt-2">
            <img [src]="slotBookingDetail.StudentImgUrl ? slotBookingDetail.StudentImgUrl : 'assets/images/No-Image.png'" class="custom-img rounded-cube border" alt="Student Image">
          </div>
          <div class="d-flex flex-column ms-3">
            <div class="text-uppercase fw-semibold ellipsis">
              <a href="javascript:void(0);" class="text-uppercase text-dark fw-semibold" pTooltip="{{ slotBookingDetail.StudentName }}">
                {{ slotBookingDetail.StudentName }}
              </a>
            </div>
            <div>
              <span *ngIf="slotBookingDetail.StudentId" class="badge rounded-pill text-bg-danger me-2">{{slotBookingDetail.StudentId}}</span>
              {{slotBookingDetail.SubjectName}}
            </div>
          </div>
        </div>
        <div class="mt-3">
          <div class="d-flex flex-row justify-content-between" *ngIf="!slotBookingDetail.IsApproved">
            <div class="d-flex align-items-center cursor-pointer">
              <div class="fw-semibold text-uppercase">Request Time: </div>
              <div class="ms-2">{{slotBookingDetail.RequestTime | date:'MM/dd/yyyy hh:mm a'}}</div>
            </div>
          </div>
          <div class="d-flex flex-row justify-content-between" *ngIf="slotBookingDetail.AcceptedTime && slotBookingDetail.IsApproved">
            <div class="d-flex align-items-center cursor-pointer">
              <div class="fw-semibold text-uppercase">Accepted Time: </div>
              <div class="ms-2">{{slotBookingDetail.AcceptedTime | date:'MM/dd/yyyy hh:mm a'}}</div>
            </div>
          </div>
          <div class="d-flex flex-row justify-content-between" *ngIf="slotBookingDetail.Day">
            <div class="d-flex align-items-center cursor-pointer">
              <div class="fw-semibold text-uppercase">Day: </div>
              <div class="ms-2">{{ getDayLabel(slotBookingDetail.Day) }}</div>
            </div>
          </div>
          <div class="d-flex flex-row justify-content-between" *ngIf="slotBookingDetail.Duration">
            <div class="d-flex align-items-center cursor-pointer">
              <div class="fw-semibold text-uppercase">Duration: </div>
              <div class="ms-2">{{slotBookingDetail.Duration}}</div>
            </div>
          </div>
        </div>
        <div class="d-flex px-1 mt-4" >
          <button pButton type="button" label="Approve" size="small" class="p-button-success p-button-outlined p-button-sm w-50" (click)="approveBookingRequest(slotBookingDetail)" pTooltip="Approve Slot" tooltipPosition="top"></button>
          <button pButton type="button" label="Reject" class="p-button-sm p-button-outlined p-button-danger ms-2 w-50" size="small" (click)="rejectBookingRequest(slotBookingDetail.Id)" pTooltip="Reject Slot" tooltipPosition="top"></button>
        </div>
      </div>
    </p-dialog>
  </ng-container> -->
